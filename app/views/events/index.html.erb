<p id="notice"><%= notice %></p>
<%= stylesheet_link_tag 'events' %>

<div class="d-flex align-items-center gap-3 mb-2">
  <h1 style="margin: 0">Events</h1>

  <%= link_to 'New Event', new_event_path, :class => 'btn btn-primary btn-new' %>
</div>

<br>

<h4> Upcoming </h4>
<div class="table-ruby table-responsive"> <%#table-responsive shows white at bottom of table %>
  <table class="table table-hover table-striped">
    <thead>
      <tr>
        <th>Name</th>
        <th>Shifts</th>
        <th>Attendance</th>
        <th>Type</th>
        <th>Date</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <%# .. and ... is <= and < %>
      <% @events.where.not(Date: ...Date.current).each do |event| %>
        <tr>
          <td><%= link_to event.Name, event, :class => 'name_links', :style => 'color: black'; %></td>
          <td><%= image_tag(event.qr_code_shift) if event.qr_code_shift.attached? %></td>
          <td><%= image_tag(event.qr_code_attendance) if event.qr_code_attendance.attached? %></td>
          <%if event.Type == 0 %>
            <td>Club Meeting</td>
          <%else%>
            <td>Volunteer Event</td>
          <%end%>
          <td><%= event.Date.strftime("%m/%d/%Y") %></td>
          <td><%= event.Start.strftime("%I:%M %p") %></td>
          <td><%= event.End.strftime("%I:%M %p") %></td>
          <td>
            <%= link_to edit_event_path(event), :class => 'name_links' do %>
              <%= image_tag "pencil-square.svg", style: 'height:1rem; width:1rem;' %>
            <% end %>
            &nbsp;
            <%= link_to event, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'name_links' do %>
              <%= image_tag "trash.svg", style: 'height:1rem; width:1rem;' %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>
<br>

<h4> Previous </h4>
<div class="table-ruby table-responsive"> <%#table-responsive shows white at bottom of table %>
  <table class="table table-hover table-striped">
    <thead>
      <tr>
        <th>Name</th>
        <th>Shifts</th>
        <th>Attendance</th>
        <th>Type</th>
        <th>Date</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% @events.where(Date: ...Date.current).each do |event| %>
        <tr>
          <td><%= link_to event.Name, event, :class => 'name_links', :style => 'color: black'; %></td>
          <td><%= image_tag(event.qr_code_shift) if event.qr_code_shift.attached? %></td>
          <td><%= image_tag(event.qr_code_attendance) if event.qr_code_attendance.attached? %></td>
          <%if event.Type == 0 %>
            <td>Club Meeting</td>
          <%else%>
            <td>Volunteer Event</td>
          <%end%>
          <td><%= event.Date.strftime("%m/%d/%Y") %></td>
          <td><%= event.Start.strftime("%I:%M %p") %></td>
          <td><%= event.End.strftime("%I:%M %p") %></td>
          <td>
            <%= link_to edit_event_path(event), :class => 'name_links' do %>
              <%= image_tag "pencil-square.svg", style: 'height:1rem; width:1rem;' %>
            <% end %>
            &nbsp;
            <%= link_to event, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'name_links' do %>
              <%= image_tag "trash.svg", style: 'height:1rem; width:1rem;' %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>