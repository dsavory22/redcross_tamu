<% if flash[:notice] %>
  <div class="alert alert-success" role="alert" id="hideMeAfter5Seconds" style="position: fixed; right: 1rem;">
    <%= flash[:notice] %>
  </div>
<% end %>

<div class="d-flex align-items-center gap-3 mb-2">
  <h1 style="margin: 0">Balance </h1>
   <h1 style="margin: 0; font-weight: 300;"><%= number_to_currency(Transaction.sum(:Amount)) %></h1>
</div>

<br>

<%= line_chart Transaction.pluck(:Date, :Total), refresh: 5, title: "Total Amount vs Time", xtitle: "Day", ytitle: "$", curve: false, colors: ["#FF0000
", "#FFFFFF"] %>

<%= pie_chart Transaction.group(:Purpose).sum(:Amount), refresh: 5, title: "Amount Spent per Purpose", colors: ["#FF0000", "#d3d3d3", "#a9a9a9"] %>

<br>

<div class="d-flex align-items-center gap-3 mb-2">
  <h1 style="margin: 0">Transactions</h1>

  <%= link_to 'Desposit', new_transaction_path(:ttype => 'deposit'), :class => 'btn btn-primary btn-new' %>
  <%= link_to 'Withdraw', new_transaction_path(:ttype => 'withdraw'), :class => 'btn btn-primary btn-new' %>
</div>


<div class="table-ruby table-responsive">
  <table class="table table-hover table-striped">
    <thead>
      <tr>
        <th>Purpose</th>
        <th>Amount</th>
        <th>Date</th>
        <th>Officer</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% @transactions.each do |transaction| %>
        <tr>
          <td><%= transaction.Purpose %></td>
          <td><%= number_to_currency(transaction.Amount) %></td>
          <td><%= transaction.Date.strftime("%m/%d/%Y") %></td>
          <td><%= transaction.Officer %></td>
          <td>
            <%= link_to edit_transaction_path(transaction), :class => 'name_links' do %>
              <%= image_tag "pencil-square.svg", style: 'height:1rem; width:1rem;' %>
            <% end %>
            &nbsp;
            <%= link_to transaction, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'name_links' do %>
              <%= image_tag "trash.svg", style: 'height:1rem; width:1rem;' %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
